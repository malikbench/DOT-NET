﻿@model M2Link.Models.ProfileModel

@{
    ViewBag.Title = "Index";
}

<h2>Profil Utilisateur</h2>

<div>
    <hr />
    <h3>Vos informations</h3>
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.LastName)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.LastName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.FirstName)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.FirstName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Email)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Email)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Pseudo)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Pseudo)
        </dd>
    </dl>

    <h3>Messages envoyés</h3>
    <table class="table table-bordered table-striped">
        <tr>
            <th>
                Message
            </th>
            <th></th>
        </tr>

        @if (Model.Messages.Count() == 0)
        {
            <tr><td>Aucun message envoyé</td></tr>
        }
        else
        {
            foreach (var item in Model.Messages)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.message)
                    </td>
                    <td class="fit-content">
                        @Html.ActionLink("Supprimer", "Delete", "Message", item, new { @class = "btn btn-sm btn-danger" })
                    </td>
                </tr>
            }
        }
    </table>

    <h3>Utilisateur suivis</h3>
    <table class="table table-bordered table-striped">
        <tr>
            <th>
                Utilisateur
            </th>
            <th></th>
        </tr>

        @if (Model.Messages.Count() == 0)
        {
            <tr><td>Aucun Following</td></tr>
        }
        else
        {
            foreach (var item in Model.Followings)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item)
                    </td>
                    <td class="fit-content">
                        <a href="@Url.Action("Unfollow" , "Profile", new { Pseudo = item, source = Url.Action()})" class="btn btn-sm btn-default">Ne plus suivre</a>
                    </td>
                </tr>
            }
        }
    </table>


</div>
<p>
    @Html.ActionLink("Editer le profil", "Edit", null, new { @class = "btn btn-sm btn-default" }) 
    @Html.ActionLink("Changer le mot de passe", "ChangePassword", null, new { @class = "btn btn-sm btn-default" })
</p>
